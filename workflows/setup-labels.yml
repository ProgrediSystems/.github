# File: .github/workflows/setup-labels.yml  
# Run this once to create standard labels across repositories

name: Setup ProgrediSystems Standard Labels
on:
  workflow_dispatch:  # Run manually
  repository_dispatch:
    types: [setup-labels]

jobs:
  create-labels:
    runs-on: ubuntu-latest
    steps:
      - name: Create ProgrediSystems Standard Labels
        uses: actions/github-script@v7
        with:
          script: |
            const labels = [
              // Revenue Labels (Green family)
              { name: 'revenue-opportunity', color: '22c55e', description: 'ğŸ’° Potential revenue generating opportunity' },
              { name: 'contract-opportunity', color: '16a34a', description: 'ğŸ›ï¸ Government contract opportunity' },
              { name: 'client-opportunity', color: '65a30d', description: 'ğŸ¤ Commercial client opportunity' },
              { name: 'cost-reduction', color: '84cc16', description: 'ğŸ’µ Reduces operational costs' },
              
              // Development Labels (Blue family)
              { name: 'feature', color: '3b82f6', description: 'ğŸš€ New feature development' },
              { name: 'enhancement', color: '6366f1', description: 'âš¡ Improve existing functionality' },
              { name: 'ai-enhancement', color: '8b5cf6', description: 'ğŸ¤– AI/ML enhancement opportunity' },
              { name: 'bug', color: 'ef4444', description: 'ğŸ› Bug fix required' },
              
              // Defense/Government Labels (Purple family)
              { name: 'government-rfp', color: '7c3aed', description: 'ğŸ›ï¸ Government RFP or contract' },
              { name: 'cmmc', color: '6d28d9', description: 'ğŸ›¡ï¸ CMMC compliance related' },
              { name: 'defense-contract', color: '5b21b6', description: 'âš”ï¸ Defense/military contract' },
              { name: 'compliance', color: '4c1d95', description: 'ğŸ“‹ Compliance or certification' },
              
              // Priority Labels (Traffic light colors)
              { name: 'priority-critical', color: 'dc2626', description: 'ğŸ”´ Critical priority - revenue/business impact' },
              { name: 'priority-high', color: 'ea580c', description: 'ğŸŸ  High priority' },
              { name: 'priority-medium', color: 'ca8a04', description: 'ğŸŸ¡ Medium priority' },
              { name: 'priority-low', color: '16a34a', description: 'ğŸŸ¢ Low priority' },
              
              // Process Labels (Gray family)
              { name: 'needs-triage', color: '6b7280', description: 'ğŸ” Needs initial review and prioritization' },
              { name: 'blocked', color: '374151', description: 'ğŸš« Blocked by external dependency' },
              { name: 'in-review', color: '4b5563', description: 'ğŸ‘€ Under review' },
              { name: 'sprint-ready', color: '059669', description: 'âœ… Ready for sprint inclusion' }
            ];

            let created = 0;
            let existing = 0;
            
            for (const label of labels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created label: ${label.name}`);
                created++;
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                  existing++;
                } else {
                  console.error(`âŒ Error creating label ${label.name}:`, error.message);
                }
              }
            }
            
            console.log(`\nğŸ“Š Summary: ${created} labels created, ${existing} already existed`);
