name: Setup ProgrediSystems Comprehensive Labels
on:
  workflow_dispatch:
  repository_dispatch:
    types: [setup-labels]

jobs:
  create-comprehensive-labels:
    runs-on: ubuntu-latest
    steps:
      - name: Create Contract Opportunity Labels
        uses: actions/github-script@v7
        with:
          script: |
            const contractLabels = [
              { name: 'contract-opportunity', color: '7c3aed', description: 'ğŸ›ï¸ Government or formal contract opportunity' },
              { name: 'government-rfp', color: '6d28d9', description: 'ğŸ›ï¸ Government RFP or solicitation' },
              { name: 'prime-contract', color: '5b21b6', description: 'ğŸ¯ Prime contractor opportunity' },
              { name: 'subcontract', color: '4c1d95', description: 'ğŸ¤ Subcontractor opportunity' },
              { name: 'idiq-contract', color: '7c2d12', description: 'ğŸ“‹ IDIQ or GSA Schedule contract' },
              { name: 'sbir-sttr', color: '059669', description: 'ğŸ”¬ SBIR/STTR small business research' },
              { name: 'sole-source', color: '16a34a', description: 'âœ… Sole source opportunity (high PWin)' },
              { name: 'limited-competition', color: 'ca8a04', description: 'âš–ï¸ Limited competition opportunity' },
              { name: 'full-competition', color: 'dc2626', description: 'âš”ï¸ Full competition opportunity' }
            ];
            
            console.log('Creating contract opportunity labels...');
            for (const label of contractLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Revenue Opportunity Labels
        uses: actions/github-script@v7
        with:
          script: |
            const revenueLabels = [
              { name: 'revenue-opportunity', color: '22c55e', description: 'ğŸ’° General revenue generating opportunity' },
              { name: 'client-opportunity', color: '16a34a', description: 'ğŸ¤ Commercial client opportunity' },
              { name: 'business-development', color: '65a30d', description: 'ğŸ“ˆ Sales and business development' },
              { name: 'partnership', color: '84cc16', description: 'ğŸ¤ Strategic partnership opportunity' },
              { name: 'licensing', color: 'a3e635', description: 'ğŸ“„ Licensing or IP opportunity' },
              { name: 'business-value', color: 'bef264', description: 'ğŸ’¼ General business value (unclear type)' }
            ];
            
            console.log('Creating revenue opportunity labels...');
            for (const label of revenueLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Feature Development Labels
        uses: actions/github-script@v7
        with:
          script: |
            const featureLabels = [
              { name: 'feature', color: '3b82f6', description: 'ğŸš€ New feature development' },
              { name: 'enhancement', color: '6366f1', description: 'âš¡ Improvement to existing functionality' },
              { name: 'ai-enhancement', color: '8b5cf6', description: 'ğŸ¤– AI/ML enhancement opportunity' },
              { name: 'bug', color: 'ef4444', description: 'ğŸ› Bug fix required' },
              { name: 'technical-debt', color: '6b7280', description: 'ğŸ”§ Technical debt or code quality' }
            ];
            
            console.log('Creating feature development labels...');
            for (const label of featureLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Priority Labels
        uses: actions/github-script@v7
        with:
          script: |
            const priorityLabels = [
              { name: 'priority-critical', color: 'dc2626', description: 'ğŸ”´ Critical priority - revenue/business impact' },
              { name: 'priority-high', color: 'ea580c', description: 'ğŸŸ  High priority' },
              { name: 'priority-medium', color: 'ca8a04', description: 'ğŸŸ¡ Medium priority' },
              { name: 'priority-low', color: '16a34a', description: 'ğŸŸ¢ Low priority' }
            ];
            
            console.log('Creating priority labels...');
            for (const label of priorityLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Market Segment Labels
        uses: actions/github-script@v7
        with:
          script: |
            const marketLabels = [
              { name: 'defense-market', color: '0d9488', description: 'âš”ï¸ Defense and military market' },
              { name: 'commercial-market', color: '14b8a6', description: 'ğŸ¢ Commercial enterprise market' },
              { name: 'federal-civilian', color: '2dd4bf', description: 'ğŸ›ï¸ Federal civilian agencies' },
              { name: 'state-local', color: '5eead4', description: 'ğŸ™ï¸ State and local government' }
            ];
            
            console.log('Creating market segment labels...');
            for (const label of marketLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Operational Labels
        uses: actions/github-script@v7
        with:
          script: |
            const operationalLabels = [
              { name: 'compliance', color: '4b5563', description: 'ğŸ“‹ Compliance or certification work' },
              { name: 'cmmc', color: '6b7280', description: 'ğŸ›¡ï¸ CMMC compliance related' },
              { name: 'security', color: '374151', description: 'ğŸ”’ Security audit or assessment' },
              { name: 'infrastructure', color: '9ca3af', description: 'ğŸ—ï¸ Infrastructure or DevOps work' },
              { name: 'documentation', color: 'd1d5db', description: 'ğŸ“š Documentation or training' }
            ];
            
            console.log('Creating operational labels...');
            for (const label of operationalLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Process Management Labels
        uses: actions/github-script@v7
        with:
          script: |
            const processLabels = [
              { name: 'needs-triage', color: '6366f1', description: 'ğŸ” Needs initial review and prioritization' },
              { name: 'sprint-ready', color: '4f46e5', description: 'âœ… Ready for sprint inclusion' },
              { name: 'sprint-planning', color: '4338ca', description: 'ğŸ“… Sprint planning related' },
              { name: 'backlog', color: '3730a3', description: 'ğŸ“‹ Product backlog item' },
              { name: 'blocked', color: '312e81', description: 'ğŸš« Blocked by external dependency' },
              { name: 'in-review', color: '1e1b4b', description: 'ğŸ‘€ Under review' }
            ];
            
            console.log('Creating process management labels...');
            for (const label of processLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Financial Tracking Labels
        uses: actions/github-script@v7
        with:
          script: |
            const financialLabels = [
              { name: 'p-and-l-impact', color: '059669', description: 'ğŸ“Š Direct P&L impact' },
              { name: 'cost-reduction', color: '047857', description: 'ğŸ’µ Reduces operational costs' },
              { name: 'revenue-blocker', color: 'dc2626', description: 'ğŸš« Blocking revenue generation' },
              { name: 'roi-tracking', color: '065f46', description: 'ğŸ“ˆ ROI measurement and tracking' }
            ];
            
            console.log('Creating financial tracking labels...');
            for (const label of financialLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Client Relations Labels
        uses: actions/github-script@v7
        with:
          script: |
            const clientLabels = [
              { name: 'client-request', color: 'ec4899', description: 'ğŸ’¼ Client requested feature or change' },
              { name: 'customer-feedback', color: 'f472b6', description: 'ğŸ’¬ Based on customer feedback' },
              { name: 'user-experience', color: 'f9a8d4', description: 'ğŸ¨ UX improvement' },
              { name: 'customer-success', color: 'fbcfe8', description: 'ğŸ¯ Customer success initiative' }
            ];
            
            console.log('Creating client relations labels...');
            for (const label of clientLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Technical Specialization Labels
        uses: actions/github-script@v7
        with:
          script: |
            const techLabels = [
              { name: 'constitutional-ai', color: 'f97316', description: 'âš”ï¸ Constitutional AI specific work' },
              { name: 'data-analytics', color: 'fb923c', description: 'ğŸ“Š Data analytics and insights' },
              { name: 'platform-development', color: 'fdba74', description: 'ğŸ—ï¸ Platform architecture work' },
              { name: 'integration', color: 'fed7aa', description: 'ğŸ”Œ System integration work' }
            ];
            
            console.log('Creating technical specialization labels...');
            for (const label of techLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Competition and Market Labels
        uses: actions/github-script@v7
        with:
          script: |
            const competitionLabels = [
              { name: 'competitive-advantage', color: 'e11d48', description: 'ğŸ† Provides competitive advantage' },
              { name: 'market-expansion', color: 'f43f5e', description: 'ğŸŒ Market expansion opportunity' },
              { name: 'strategic-initiative', color: 'fb7185', description: 'ğŸ¯ Strategic business initiative' }
            ];
            
            console.log('Creating competition and market labels...');
            for (const label of competitionLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }

      - name: Create Automation and Workflow Labels
        uses: actions/github-script@v7
        with:
          script: |
            const automationLabels = [
              { name: 'automation', color: '8b5cf6', description: 'âš¡ Automation opportunity' },
              { name: 'ml-required', color: 'a855f7', description: 'ğŸ§  Requires ML/AI implementation' },
              { name: 'workflow-improvement', color: 'c084fc', description: 'ğŸ”„ Workflow or process improvement' }
            ];
            
            console.log('Creating automation and workflow labels...');
            for (const label of automationLabels) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  ...label
                });
                console.log(`âœ… Created: ${label.name}`);
              } catch (error) {
                if (error.status === 422) {
                  console.log(`â„¹ï¸ Label ${label.name} already exists`);
                } else {
                  console.error(`âŒ Error creating ${label.name}:`, error.message);
                }
              }
            }
